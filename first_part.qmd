---
title: "Description of the data sets"
format: html
editor: visual
---

# Preparation

```{r}
#| message: FALSE
here::i_am("project_datamanagement.Rproj")
library(here)
library(vroom) 
library(dplyr)
library(tidyr)
library(ggplot2)
```

# Links

## Link to the github project

<https://github.com/inesdamiche/project_datamanagement.git>

## Links to the sources

#### For the World Bank Database

We got the data by generating it through the World Bank Database by selecting all the countries , 2021 for the year and our variables of interest (Percentage of Women in Parliament , Female Labour Participation and Labour Participation, Annual GDP growth ) and by clicking on "Download options": <https://databank.worldbank.org/source/world-development-indicators>

We did the same thing for the meta-data (to categorise the countries by income group and regions): <https://databank.worldbank.org/source/world-development-indicators>

#### For the Human Development Composite Indices

<https://hdr.undp.org/data-center/documentation-and-downloads> We selected : "Human development Index and components" " Inequality-adjusted Human Development Index" "Gender development Index" "Planetary Pressure-adjusted HDI"

The meta-data for these databases is taken from the UN's Staistics Division website : we clicked dowloaded the CSV version 
<https://unstats.un.org/unsd/methodology/m49/overview/>


# Short description of the sources

**Indicator: Proportion of seats held by women in national parliaments (%)**

The data is compiled by the Inter-Parliamentary Union (IPU) ([www.ipu.org](http://www.ipu.org))

based on information provided by National Parliaments. The data is compiled every year.

**Indicator: Labor force participation rate, total (% of total population ages 15+) (modeled ILO estimate)**

The data is compiled by the International Labor Organization(<https://ilostat.ilo.org/data/>) from labor force surveys, censuses, and establishment censuses and surveys. For some countries a combination of these sources is used. It is part of the "ILO modeled estimates database".

The data is compiled every year.

**Indicator: Labor force participation rate, female (% of female population ages 15-64) (modeled ILO estimate)**

The data is compiled in the same way as for the previous indicator.

**Indicator: GDP growth (annual %)**

The data come from the World Bank national accounts data and OECD National Accounts files. It is compiled every year.

**Indicator: planetary pressures-adjusted Human Development Index (HDI, PHDI, adjustment factor for planetary pressures, Carbon dioxide emissions per capita (production), Carbon dioxide emissions (production) index, Material footprint per capita, Material footprint index)**

The data from this base is compiled by using different sources (HDRO calculations based on data from Barro and Lee (2018), IMF (2022), UNDESA (2022a), UNESCO Institute for Statistics (2022), United Nations Statistics Division (2022), World Bank (2022), Global Carbon Project (2022), United Nations Environment Programme (2022)).

Some variables are computed thanks to the values of the other variables.

**Indicator: Women Business and the Law Index Score (scale 1-100)**

The data is compiled by the World Bank (<https://wbl.worldbank.org/>) every year.

**Indicator: Military expenditure (% of GDP)**

 The data is compiled every year by the Stockholm International Peace Research Institute (SIPRI) (<https://www.sipri.org/databases>).  

In the many cases where SIPRI cannot make independent estimates, it uses the national data provided. Because of the differences in definitions and the difficulty in verifying the accuracy and completeness of data, data on military expenditures are not always comparable across countries. However, SIPRI puts a high priority on ensuring that the data series for each country is comparable over time.

**Indicator: Human development index and its components (HDI, Life expectancy at birth, expected years of schooling, mean years of schooling, gross national income per capita, GNI per capita rank minus HDI rank, HDI rank)**

The data from this base is compiled by using different sources (HDRO calculations based on data from Barro and Lee (2018), IMF (2022), UNDESA (2022a), UNDESA (2022b), UNESCO Institute for Statistics (2022), United Nations Statistics Division (2022), World Bank (2022), UNDESA (2022a), CEDLAS and World Bank (2022), ICF Macro Demographic and Health Surveys, UNICEF Multiple Indicator Cluster Surveys, OECD (2022)).

Some sources are used to compute several variables.

Some variables are computed thanks to the values of the other variables.

**Indicator: Gender development index**

The data from this base is compiled by using different sources (HDRO calculations based on data from Barro and Lee (2018), ILO (2022), IMF (2022), UNDESA (2022a), UNESCO Institute for Statistics (2022), United Nations Statistics Division (2022) and World Bank (2022), CEDLAS and World Bank (2022), ICF Macro Demographic and Health Surveys, UNICEF Multiple Indicator Cluster Surveys, Barro and Lee (2018), HDRO calculations based on ILO (2022), IMF (2022)).

Some sources are used to compute several variables.

Some variables are computed thanks to the values of the other variables.

**Indicator: Inequality-adjusted Human Development Index (Coefficient of human inequality, Inequality in life expectancy, Inequality-adjusted life expectancy index, Inequality in education, Inequality-adjusted education index, Inequality in income, Inequality-adjusted income index, Income shares held by (%), Gini coefficient)**

The data from this base is compiled by using different sources (HDRO calculations based on data from Barro and Lee (2018), IMF (2022), UNDESA (2022a), UNESCO Institute for Statistics (2022), United Nations Statistics Division (2022) and World Bank (2022), World Inequality Database (2022), Center for Distributive, United Nations Educational Scientific and Cultural Organization Institute for Statistics, United Nations Children's Fund Multiple Indicator Cluster Surveys).

# Tables with basic information

## Loading the datasets

```{r}
#| message: FALSE
metadata <- vroom(here("data csv/countries_metadata.csv")) 
gender_dev <- vroom(here("data csv/dvlpmt_gender_index.csv"))
planet_HDI <- vroom(here("data csv/HDI_planet.csv"))
HDI <- vroom(here("data csv/HDI.csv"))
inequalities <- vroom(here("data csv/inequalities.csv"))
world_dev <- vroom(here("data csv/World Development Indicators - WB.csv"))
metadata_UNDP <- vroom(here("data csv/UNSD — Methodology.csv")) 
```

## Tables (before cleaning and joining)

```{r}
metadata |> 
  summarise("nb of rows in metadata" = nrow(metadata), "nb of columns in metadata"   = ncol(metadata))|>
  knitr::kable() 

gender_dev |> 
  summarise("nb of rows in gender_dev" = nrow(gender_dev), "nb of columns in metadata"   = ncol(gender_dev))|>
  knitr::kable()

HDI |> 
  summarise("nb of rows in HDI" = nrow(HDI), "nb of columns in HDI"   = ncol(HDI))|>
  knitr::kable()

inequalities |> 
  summarise("nb of rows in inequalities" = nrow(inequalities), "nb of columns in inequalities" = ncol(inequalities))|>
  knitr::kable()

planet_HDI |> 
  summarise("nb of rows in planet_HDI" = nrow(planet_HDI), "nb of columns in planet_HDI" = ncol(planet_HDI))|>
  knitr::kable()

#attention ici il faut remplacer .. par des NA 
world_dev |> 
  summarise("nb of rows in world_dev " = nrow(world_dev), "nb of columns in world_dev" = ncol(world_dev))|>
  knitr::kable()

```

# Short description of each variable

# Description of the data joining, cleaning, etc


```{r}
# Data Cleaning - World Development Indicators.
# We turn the rows that do not contains a values into NA value
Dev <- world_dev |>
  mutate(`2021 [YR2021]` = na_if(`2021 [YR2021]`, ",,"))
# We turn the values into numeric ones and make sure that Rstudio takes into account that the decimal separator is "," and not "."
Dev <- Dev|>
  mutate(`2021 [YR2021]` = as.numeric(gsub(",",".", `2021 [YR2021]`)))
```

```{r}
# UNDP Database
#we select colums we are interested in and turn the values into numeric ones 
HDI<-
  HDI|>
  select(`Table 1. Human Development Index and its components`,...3)|>
  rename(`Country Name`=`Table 1. Human Development Index and its components`,HDI_val=...3)
HDI <- HDI|>
  mutate(HDI_val = as.numeric(gsub(",", ".", HDI_val)))

#Gender Development Index
GDI<-gender_dev|>
  select(`Table 4. Gender Development Index`,...3)|>
  rename(`Country Name`=`Table 4. Gender Development Index`,GDI_val=...3)|>
   mutate(GDI_val = as.numeric(gsub(",", ".", GDI_val)))

# Gini Coefficient
Gini<-inequalities|>
  select(`Table 3. Inequality-adjusted Human Development Index`,...31)|>
  rename(`Country Name`=`Table 3. Inequality-adjusted Human Development Index`,Gini_coef=...31)|>
  mutate(Gini_coef = as.numeric(gsub(",", ".", Gini_coef)))

#PHDI
PHDI<-planet_HDI|>
  select(`Table 7. Planetary pressures-adjusted Human Development Index`,...5)|>
  rename(`Country Name`=`Table 7. Planetary pressures-adjusted Human Development Index`,PHDI=...5)|>
  mutate(PHDI = as.numeric(gsub(",", ".", PHDI)))

```


```{r}
# Metadata cleaning 
#World Bank
meta_WB<-metadata|>
  select(Code,`Table Name`,Region,`Income Group`)|>
  rename(`Country Name`=`Table Name`)
#UNDP
meta_UNDP<-metadata_UNDP|>
  select(`Country or Area`,`ISO-alpha3 Code`)|>
  rename(`Country Name`=`Country or Area`)
```

```{r}
#MetaData Joining - UNDP databases
#join UNDP data with their Country Code

# Function in order to perform a "left-join" for each databases
country_code<-function(dataset1,dataset2){
  dataset1<-left_join(dataset1, dataset2, join_by(`Country Name`))|>
    rename(`Country Code`=`ISO-alpha3 Code`)|>
    drop_na(`Country Code`)|>
    select(-`Country Name`)
  
}

# we create a new metadata dataframe to join the country code for the 12 countries that couldn't be joined

other <- tibble(`Country Name`  = c("United States", "United Kingdom", "Tanzania (United Republic of)", "Palestine, State of", "Netherlands","Moldova (Republic of)",	"Korea (Republic of)" , "Korea (Democratic People's Rep. of)" , "Hong Kong, China (SAR)",
"Eswatini (Kingdom of)" , "Côte d'Ivoire" , "Congo (Democratic Republic of the)"),
  `ISO-alpha3 Code` = c("USA","GBR","TZA","PSE","NLD", "MDA","KOR","PRK","HKG","SWZ","CIV","COD"))
meta_UNDP<-rbind(meta_UNDP,other)


HDI<-country_code(HDI,meta_UNDP)
GDI<-country_code(GDI,meta_UNDP)
Gini<-country_code(Gini,meta_UNDP)
PHDI<-country_code(PHDI,meta_UNDP)
```

```{r}
#MetaData Joining - WB databases
meta_WB<-meta_WB|>
  select(-`Country Name`)|>
  rename(`Country Code`=`Code`)
Dev<-left_join(Dev, meta_WB, join_by(`Country Code`))

```

```{r}
# Databases Joining
Dev <-inner_join(Dev,GDI,join_by(`Country Code`))
Dev <-inner_join(Dev,HDI,join_by(`Country Code`))
Dev <-inner_join(Dev,Gini,join_by(`Country Code`))

# Final Dataset
dataset <- inner_join(Dev, PHDI, join_by(`Country Code`))

# Turn the Indicators from the World Bank Databases into Columns 
dataset<-dataset|>
  select(-`Series Code`)|>
  pivot_wider(names_from = `Series Name`,values_from = `2021 [YR2021]`)

# Elimination of all the NA Values 
dataset<-na.omit(dataset)

```

# Description of the research question (500 words)

# Graphical representation of the main variable (women in parliament)
